$(document).ready(function(){$(".sA-button").on("click",function(){$("#sA").removeClass("fadeInRight").addClass("fadeOutLeft");setTimeout(function(){$("#sA").addClass("hidden");$("#sB").removeClass("hidden").addClass("animated fadeInRight");setTimeout(function(){$(".sB-instructions-container").addClass("animated fadeOut");setTimeout(function(){$(".sB-instructions-container").addClass("hidden");gameInit()},1000)},3000)},1000)});$(".sC-button").on("click",function(){$("#sC").removeClass("fadeInRight").addClass("fadeOutLeft");setTimeout(function(){$("#sC").addClass("hidden");$("#game").html("");$("#sB").removeClass("hidden").removeClass("fadeOutLeft").addClass("animated fadeInRight");setTimeout(function(){gameInit()},1000)},1000)})});var MD=new MobileDetect(window.navigator.userAgent);if(MD.mobile()){var FPS=1000/10;var WIDTH=330;var HEIGHT=200;var FRAMEX=33;var FRAMEY=20;var SCORE=0;var BOOLBACKGROUND=true;$(".sB-instructions-container").addClass("hidden")}else{var FPS=1000/10;var WIDTH=330;var HEIGHT=280;var FRAMEX=33;var FRAMEY=28;var SCORE=0;var BOOLBACKGROUND=true;$(".sB-mobile-instructions-container").addClass("hidden");$(".controls").addClass("hidden")}var COIN=new Image();COIN.src="recursos/images/coin.png";function gameInit(){var l;var h=[];var a=[-1,0,1,0];var g=[0,-1,0,1];var m=[];var j=1;var r=[];var d=5+(Math.random()*(FRAMEX-10))|0;var b=5+(Math.random()*(FRAMEY-10))|0;var q=Math.random()*3|0;var p=0;SCORE=0;var o=50;var c=0,f=0;var n,k;var e=document.createElement("canvas");for(n=0;n<FRAMEX;n++){r[n]=[]}e.setAttribute("width",WIDTH);e.setAttribute("height",HEIGHT);l=e.getContext("2d");document.getElementById("game").appendChild(e);function s(){var i,u;do{i=Math.random()*FRAMEX|0;u=Math.random()*FRAMEY|0}while(r[i][u]);r[i][u]=1;l.drawImage(COIN,i*10,u*10)}s();function t(){if(f){d=(d+FRAMEX)%FRAMEX;b=(b+FRAMEY)%FRAMEY}--o;if(h.length){k=h.pop();if((k%2)!==(q%2)){q=k}}if((f||(0<=d&&0<=b&&d<FRAMEX&&b<FRAMEY))&&2!==r[d][b]){if(1===r[d][b]){SCORE+=Math.max(5,o);o=50;s();j++}if(BOOLBACKGROUND){BOOLBACKGROUND=false;l.fillStyle="#1C781C"}else{BOOLBACKGROUND=true;l.fillStyle="#26A426"}l.fillRect(d*10,b*10,10-1,10-1);r[d][b]=2;m.unshift([d,b]);d+=a[q];b+=g[q];if(j<m.length){k=m.pop();r[k[0]][k[1]]=0;l.clearRect(k[0]*10,k[1]*10,10,10)}}else{if(!h.length){$("#score").html(SCORE);window.clearInterval(p);$("#sB").removeClass("fadeInRight").addClass("fadeOutLeft");setTimeout(function(){$("#sB").addClass("hidden");$("#sC").removeClass("hidden").removeClass("fadeOutLeft").addClass("animated fadeInRight");setTimeout(function(){},1000)},1000)}}}p=window.setInterval(t,FPS);$(".control").on("click",function(){var i=$(this).attr("data-code");if(0<=i&&i<4&&i!==h[0]){h.unshift(i)}else{if(-5==i){if(p){window.clearInterval(p);p=null}else{p=window.setInterval(t,FPS)}}else{k=c+i;if(k==44||k==94||k==126||k==171){c+=i}else{if(k===218){f=1}}}}});document.onkeydown=function(u){var i=u.keyCode-37;if(0<=i&&i<4&&i!==h[0]){h.unshift(i)}else{if(-5==i){if(p){window.clearInterval(p);p=null}else{p=window.setInterval(t,FPS)}}else{k=c+i;if(k==44||k==94||k==126||k==171){c+=i}else{if(k===218){f=1}}}}}};